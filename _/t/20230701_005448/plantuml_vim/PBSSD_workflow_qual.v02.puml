@startuml
'// PBSSD productization work flow (v0.4 2023.06.30 <- v0.1 2023.06.09) @brian.m.jung 'BNOTE




'// SECTION_1 { Configuration
'// DO NOT edit this section (your editable section is SECTION_2)

!$DSCR_WF1 = "PBSSD qualification"
!$DSCR_WF2 = "PBSSD field issue handling"
!$DSCR_WF1P1 = "baremetal devel. and ODM self-evaluation/delivery: SolDev(w/TED), ODM"
!$DSCR_WF1P2 = "HW+SW integration and level-zero test: SWDev, DTC, MSL"
!$DSCR_WF1P3 = "main qualification: SolPE, DevQA, SolDev, SWDev, DTC, MSL"
!$DSCR_WF2P1 = "issue reception and initial inspection"
!$DSCR_WF2P2 = "deeper inspection and troubleshooting"

skinparam backgroundColor white
skinparam ArrowColor black
skinparam defaultFontSize 14
skinparam defaultFontName courier
skinparam note {
	backgroundColor yellow
}

skinparam participant {
	BorderColor black
'	BackgroundColor #94de5e
}
'participant DSA.MSL as MSL
'participant DSA.NB as DSANB 
'participant DSA.SMRC as SMRC
'participant DSA.CS as DSACS
'participant DSK.SWDev as SWDEV

participant DSK.PMO as PMO
participant "PBSSD_FWDev\n- Block I/F: DSK.SWDev\n- File I/F: DSA.DTC\n- Object I/F: DSA.MSL" as PFD
participant DSK.SolDev as SOLDEV
participant DSK.SolPE as SOLPE
participant DSK.DevQA as DEVQA

participant Partner.ODM as ODM #6fbfbf
participant DSA.DTC as DTC #8080ff
participant DSA.TED as TED #8080ff
participant DSA.QA as DSAQA #8080ff
participant DSK.NBP as DSKNBP
participant Customers as CSTMR #eebed0

'//} SECTION_1




'// SECTION_2 { WorkFlow Description (Sequence Diagram)
'//

skinparam legendBorderColor #ffffff
'skinparam legendBackgroundColor #ffffff    'BNOTE

legend top left
	| Item | Description |
	| WFm.Pn | WorkFlow #m and Phase #n |
	| WF1 | WF1: $DSCR_WF1 \n	P1: $DSCR_WF1P1 \n	P2: $DSCR_WF1P2 \n	P3: $DSCR_WF1P3 |
	| WF2 | WF2: $DSCR_WF2 \n	P1: $DSCR_WF2P1 \n	P2: $DSCR_WF2P2 |
	| PBSSD_FWDev | PBSSD FW development team/lab \n	Block I/F PBSSD FW: by DSK.SWDev \n	File I/F PBSSD FW: by DSA.DTC \n	Object I/F PBSSD FW: by DSA.MSL |
endlegend

'// group WF1.P1 [PBSSD baremetal devel. and ODM self-evaluation/delivery: SOLDEV, ODM]
autonumber 1.1.1
group WF1.P1 [$DSCR_WF1P1]
	DSKNBP -> PMO : request for PBSSD productization
	PMO -> DSKNBP : response (ack)
	DSKNBP -> SOLDEV : baremetal requirements
	SOLDEV -> ODM : baremetal spec
	ODM -> ODM : manufacturing\ninitial baremetal samples
	ODM -> SOLDEV : notification of ODM self-evaluation ready
	SOLDEV -> ODM : SSDs to be used ODM self-evaluation
	SOLDEV -> ODM : baremetal TC script for ODM self-evaluation
	activate ODM #00ff00
	ODM -> ODM : ODM self-evaluation\nwith baremetal TC script
	note left
		[CHECK#]
		Can TED help SolDev and ODM to save the time?
		e.g.,
		TED's parallel execution of (ODM's) self-evaluation,
		and troubleshooting together with ODM
	end note
	ODM -> SOLDEV : ODM self-evaluation result report
	deactivate ODM
	ODM -> SOLDEV : initial baremetal samples for SolDev's inspection
	note right
		[CHECK#]
		how many # of samples
		for SolDev's initial baremetal inspection?
	end note
	activate SOLDEV #00ff00
	SOLDEV -> SOLDEV : baremetal inspection by SolDev
	SOLDEV -> ODM : request to manufacture further baremetal samples
	deactivate SOLDEV
	ODM -> ODM : manufacturing\nfurther baremetal samples\nfor level-zero test
	activate ODM #00ff00
	ODM -> ODM : ODM self-evaluation\nwith baremetal TC script
	ODM -> SOLDEV : ODM self-evaluation result report
	deactivate ODM
	ODM -> SOLDEV : further baremetal samples (for level-zero test)
	note left
		[CHECK#]
		how many # of samples
		for level-zero test?
	end note
	SOLDEV -> PMO : baremetal inspection result report
end group

...
autonumber 1.2.1
group WF1.P2 [$DSCR_WF1P2]
	note over PFD #ffffff
		[NOTE]
		Assumed that
		PBSSD level-zero TC
		is already ready
		before reaching this point
	end note
'	PMO -> PMO : level-zero test: started
	PMO -> PFD : request for level-zero test
	activate PFD #00ff00
	PFD -> PFD : system bring-up
	note left #ffffff
		[NOTE]
		install PBSSD FW (B/F/O)
		on the baremetal
		to bring up PBSSD
	end note
	PFD -> PFD : PBSSD functional\nlevel-zero test\ntroubleshooting
	note left
		[CHECK#]
		what kinds of level-zero test items
		for basic functionality test?
		- I/O, Admin commands?
		- essential custom features?
	end note
	PFD -> PFD : PBSSD performance\nlevel-zero test\ntroubleshooting
	note left
		[CHECK#]
		what kinds of level-zero test items
		for basic performance test?
		- SW/SR/RW/RR?
	end note
	PFD -> PMO : PBSSD level-zero test report
	deactivate PFD
'	PMO -> PMO : level-zero test: done
	PMO -> DSKNBP : notification of PBSSD qual-ready
end group

...
autonumber 1.3.1
group WF1.P3 [$DSCR_WF1P3]
	DSKNBP -> PMO : request for PBSSD qual
'	PMO -> PMO : PBSSD qual: started
	PMO -> PMO : prepare enough # of\nsamples for qual
	note left #ffffff
		[NOTE]
		Based on the request from DSK NBP
		(how many qual samples are needed)
	end note
	...
	PMO -> SOLPE : request to start DV
	activate SOLPE #00ff00
	SOLPE -> SOLPE : PBSSD DV
	note over SOLPE #ffffff : DV troubleshooting\nwith dev teams
	/ note over SOLDEV #ffffff : DV troubleshooting\nfor PBSSD HW
	/ note over PFD #ffffff : DV troubleshooting\nfor PBSSD FW
	SOLPE -> PMO : DV result report
	deactivate SOLPE
	...
	PMO -> SOLPE : request to start PV
	activate SOLPE #00ff00
	SOLPE -> SOLPE : PBSSD PV
	note over SOLPE #ffffff : PV troubleshooting\nwith dev teams
	/ note over SOLDEV #ffffff : PV troubleshooting\nfor PBSSD HW
	/ note over PFD #ffffff : PV troubleshooting\nfor PBSSD FW
	/ note over DTC : [CHECK#]\nCan DTC help PBSSD PV?\n----\nadvanced perf eval\nand troubleshooting\n(E2E perf eval\nwith customers'\nrealistic workload)\n----\nThis may give us\nwider perf. coverage.\nLet's discuss!
	SOLPE -> PMO : PV result report
	deactivate SOLPE
	...
	PMO -> DEVQA : request to start PR
	activate DEVQA #00ff00
	DEVQA -> DEVQA : PBSSD PR
	note over DEVQA #ffffff : PR troubleshooting\nwith dev teams
	/ note over SOLDEV #ffffff : PR troubleshooting\nfor PBSSD HW
	/ note over PFD #ffffff : PR troubleshooting\nfor PBSSD FW
	DEVQA -> PMO : PR result report
	deactivate DEVQA
	...
'	PMO -> PMO : PBSSD qual: done
	PMO -> DSKNBP : response (qual completed)
	DSKNBP -> CSTMR : notification that PBSSD Customer Samples are ready
end group

...
note across #b9b9b9
	PBSSD samples are deployed in the field.
end note

...
autonumber 2.1.1
group WF2.P1 [$DSCR_WF2P1]
	CSTMR -> DSAQA : problem reporting
	DSAQA -> DSAQA : field issue status: open
'	activate DSAQA #00ff00
'	activate DSAQA #00ff00
	DSAQA -> TED : request for initial inspection
	activate TED #00ff00
	DSAQA -> DSAQA : field issue status: in-progress
	TED -> TED : replay the case\nand initial inspection
	TED -> DSAQA : initial inspection report\n(maybe with solution)
	deactivate TED
	alt issue resolved
		DSAQA -> DSAQA : field issue status: resolved
		DSAQA -> CSTMR : report to customer with solution
		DSAQA -> DSAQA : field issue status: close
'		deactivate DSAQA
	else further actions required
		DSAQA -> SOLDEV : request for PBSSD HW inspection
		activate SOLDEV #00ff00
		DSAQA -> PFD : request for PBSSD FW inspection
		activate PFD #00ff00
		DSAQA -> DTC : request for customer host system inspection
		activate DTC #00ff00

		SOLDEV -> ODM : request for PBSSD HW co-inspection
		activate ODM #00ff00
		ODM -> ODM : PBSSD HW inspection
		ODM -> SOLDEV : inspection report from ODM
		deactivate ODM
		SOLDEV -> SOLDEV : PBSSD HW further inspection
		SOLDEV -> DSAQA : PBSSD HW troubleshooting report with solution
		deactivate SOLDEV

		PFD -> DSAQA : PBSSD FW troubleshooting report with solution
		deactivate PFD

		DTC -> DSAQA : E2E customer host system troubleshooting report with solution
		deactivate DTC

		DSAQA -> CSTMR : report to customer with solution
		DSAQA -> DSAQA : field issue status: close
'		deactivate DSAQA
	end alt
end group

'//} SECTION_2




@enduml
